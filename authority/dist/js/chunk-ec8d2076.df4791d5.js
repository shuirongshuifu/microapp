(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ec8d2076"],{"01ca":function(e,t,s){},"0c49":function(e,t,s){"use strict";s("01ca")},dd7b:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"loginBox"},[t("div",{staticClass:"loginContent"},[t("h3",[e._v("微前端子应用之权限项目")]),t("el-select",{attrs:{clearable:"",size:"small",placeholder:"请选择角色登录"},on:{"visible-change":t=>{t&&e.listRoles()}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.roleList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.roleName+" ("+e.roleRemark+")",value:e.menuIds}})})),1),t("br"),t("span",[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-thumb",disabled:0==e.value.length},on:{click:e.loginIn}},[e._v("点击登录")])],1)],1)])},l=[],n=(s("be09"),s("a18c")),i=s("4360"),o={name:"login",data(){return{value:"",roleList:[]}},created(){this.listRoles()},mounted(){let e=window.microApp.getData();console.log("接收到基座传递来的token",e)},methods:{async listRoles(){const e=await this.$auth.listRoles();0==e.code&&(this.roleList=e.data)},async loginIn(){const e=await this.$store.dispatch("menu/tree_menu",this.value);if(0==e.code){n["a"].addRoutes(i["a"].state.menu.routerTree);let e=this.roleList.findIndex(e=>e.menuIds==this.value);sessionStorage.setItem("username",this.roleList[e].roleName),this.$message({type:"success",message:"登录成功"}),this.$router.push({path:"/"})}}}},c=o,r=(s("0c49"),s("e607")),u=Object(r["a"])(c,a,l,!1,null,"c247dfce",null);t["default"]=u.exports}}]);